# vlan
## 定义（vlan 是什么）
是一种网络技术，允许在物理网络基础上创建逻辑分离的网络，通过vlan，可以将一个物理网络划分为多个虚拟网络，以实现更高效，更安全的网络管理。

## 核心概念（vlan 的作用）
1. 逻辑分离
* vlan 将网络设备按逻辑分组，即使它们链接在同一个物理交换机上， 也属于不同的广播域。
* 例如，不同部门的电脑可以划分到不同的 vlan，彼此之间无法直接通信

2. 广播域划分
* vlan的每个分组是一个独立的广播域，这减少了广播风暴的影响，提高了网络性能

3. 标识（vlan id）
* 每个 vlan 通过一个唯一的 vlan id 来标识, 范围为1到4094

## 主要优势（vlan 能做什么）
1. 提高网络的安全性
* 不同 vlan 的设备默认无法通信，除非通过路由器或三层交换机配置路由规则

2. 简化管理
* 通过逻辑分组设备，可以根据业务需求动态调整网络拓扑
* 易于隔离不同部门或业务的网络

3. 减少广播流量
* vlan 将网络分割成多个广播域，限制广播的传输范围

4. 灵活性
* 无需物理上重新布线，只需在交换机中配置 vlan 即可有重新分组

## vlan的工作原理
1. 交换机的角色
* 同一 vlan 下的网络互通，符合交换机的特征

2. 帧打标签
* 不同交换机之间的 vlan 相互通信时，会将传输的以太网帧增加 4 字节的 vlan 标识，可以通过标识来识别不同的 vlan id。

3. 端口模式
* Access Port(接入端口)：
不携带 vlan 标签的的是接入端口。比如，pc、打印机等

* Trunk Port（干道端口）
携带 vlan 标签的是干道端口。比如，交换机和交换机之间

## vlan 命令
### 交换机和PC之间
`vlan batch 10 20`:创建多个 vlan

`int e0/0/2`

`port link-type access`:设置为 access 口

`port default vlan 10`：默认 vlan 10

### 交换机和交换机之间

`int e0/0/0`

`port link-type trunk`:设置为 trunk 口

`port trunk allow-pass vlan 10 20`:默认允许 vlan 10 20 通过
